{"filter":false,"title":"deploy_lambda.yml","tooltip":"/.github/workflows/deploy_lambda.yml","undoManager":{"mark":15,"position":15,"stack":[[{"start":{"row":0,"column":0},"end":{"row":58,"column":0},"action":"insert","lines":["name: Deploy SAM Application","","on:","  push:","    branches:","      - main  # Trigger deployment only on pushes to the main branch","","jobs:","  deploy:","    name: Deploy SAM Application to AWS","    runs-on: ubuntu-latest","","    steps:","      # Checkout the repository","      - name: Checkout Code","        uses: actions/checkout@v3","","      # Set up Python environment","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: 3.8  # Match your Lambda runtime version","","      # Install AWS CLI and SAM CLI","      - name: Install AWS CLI and SAM CLI","        run: |","          sudo apt-get update","          sudo apt-get install -y awscli unzip","          curl -sSL https://github.com/aws/aws-sam-cli/releases/latest/download/aws-sam-cli-linux-x86_64.zip -o sam-cli.zip","          unzip sam-cli.zip -d sam-installation","          sudo ./sam-installation/install","","      # Configure AWS credentials","      - name: Configure AWS Credentials","        uses: aws-actions/configure-aws-credentials@v3","        with:","          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","          aws-region: ${{ secrets.AWS_REGION }}","","      # Install dependencies","      - name: Install Dependencies","        run: |","          cd sam_lambda/Couch-explorer/image_generator  # Change to the directory containing requirements.txt","          pip install -r requirements.txt -t .","","      # Build SAM application","      - name: Build SAM Application","        run: sam build --template-file sam_lambda/Couch-explorer/template.yaml","","      # Deploy SAM application","      - name: Deploy SAM Application","        run: |","          sam deploy \\","            --template-file .aws-sam/build/template.yaml \\","            --stack-name my-sam-stack \\","            --capabilities CAPABILITY_IAM \\","            --region ${{ secrets.AWS_REGION }}",""],"id":1}],[{"start":{"row":5,"column":13},"end":{"row":5,"column":68},"action":"remove","lines":[" # Trigger deployment only on pushes to the main branch"],"id":2},{"start":{"row":5,"column":12},"end":{"row":5,"column":13},"action":"remove","lines":[" "]}],[{"start":{"row":13,"column":0},"end":{"row":13,"column":31},"action":"remove","lines":["      # Checkout the repository"],"id":3},{"start":{"row":12,"column":10},"end":{"row":13,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":16,"column":0},"end":{"row":16,"column":33},"action":"remove","lines":["      # Set up Python environment"],"id":4},{"start":{"row":15,"column":0},"end":{"row":16,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":19,"column":29},"end":{"row":19,"column":66},"action":"remove","lines":["  # Match your Lambda runtime version"],"id":5}],[{"start":{"row":21,"column":0},"end":{"row":21,"column":35},"action":"remove","lines":["      # Install AWS CLI and SAM CLI"],"id":6},{"start":{"row":20,"column":0},"end":{"row":21,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":29,"column":0},"end":{"row":29,"column":33},"action":"remove","lines":["      # Configure AWS credentials"],"id":7},{"start":{"row":28,"column":0},"end":{"row":29,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":36,"column":0},"end":{"row":36,"column":28},"action":"remove","lines":["      # Install dependencies"],"id":8},{"start":{"row":35,"column":0},"end":{"row":36,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":41,"column":0},"end":{"row":41,"column":29},"action":"remove","lines":["      # Build SAM application"],"id":9},{"start":{"row":40,"column":0},"end":{"row":41,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":44,"column":0},"end":{"row":44,"column":30},"action":"remove","lines":["      # Deploy SAM application"],"id":10},{"start":{"row":43,"column":0},"end":{"row":44,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":33,"column":56},"end":{"row":33,"column":66},"action":"remove","lines":["ACCESS_KEY"],"id":11},{"start":{"row":33,"column":56},"end":{"row":33,"column":57},"action":"insert","lines":["K"]},{"start":{"row":33,"column":57},"end":{"row":33,"column":58},"action":"insert","lines":["E"]},{"start":{"row":33,"column":58},"end":{"row":33,"column":59},"action":"insert","lines":["Y"]},{"start":{"row":33,"column":59},"end":{"row":33,"column":60},"action":"insert","lines":["_"]},{"start":{"row":33,"column":60},"end":{"row":33,"column":61},"action":"insert","lines":["I"]},{"start":{"row":33,"column":61},"end":{"row":33,"column":62},"action":"insert","lines":["D"]}],[{"start":{"row":38,"column":55},"end":{"row":38,"column":109},"action":"remove","lines":[" # Change to the directory containing requirements.txt"],"id":12},{"start":{"row":38,"column":54},"end":{"row":38,"column":55},"action":"remove","lines":[" "]}],[{"start":{"row":0,"column":0},"end":{"row":51,"column":0},"action":"remove","lines":["name: Deploy SAM Application","","on:","  push:","    branches:","      - main","","jobs:","  deploy:","    name: Deploy SAM Application to AWS","    runs-on: ubuntu-latest","","    steps:","      - name: Checkout Code","        uses: actions/checkout@v3","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: 3.8","","      - name: Install AWS CLI and SAM CLI","        run: |","          sudo apt-get update","          sudo apt-get install -y awscli unzip","          curl -sSL https://github.com/aws/aws-sam-cli/releases/latest/download/aws-sam-cli-linux-x86_64.zip -o sam-cli.zip","          unzip sam-cli.zip -d sam-installation","          sudo ./sam-installation/install","","      - name: Configure AWS Credentials","        uses: aws-actions/configure-aws-credentials@v3","        with:","          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws-secret-access-key: ${{ secrets.AWS_SECRET_KEY_ID }}","          aws-region: ${{ secrets.AWS_REGION }}","","      - name: Install Dependencies","        run: |","          cd sam_lambda/Couch-explorer/image_generator","          pip install -r requirements.txt -t .","","      - name: Build SAM Application","        run: sam build --template-file sam_lambda/Couch-explorer/template.yaml","","      - name: Deploy SAM Application","        run: |","          sam deploy \\","            --template-file .aws-sam/build/template.yaml \\","            --stack-name my-sam-stack \\","            --capabilities CAPABILITY_IAM \\","            --region ${{ secrets.AWS_REGION }}",""],"id":13},{"start":{"row":0,"column":0},"end":{"row":46,"column":0},"action":"insert","lines":["name: Deploy SAM Application","","on:","  push:","    branches:","      - main  # Trigger on pushes to the main branch","","jobs:","  deploy:","    name: Deploy SAM Application","    runs-on: ubuntu-latest","","    steps:","      - name: Checkout Code","        uses: actions/checkout@v3","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: 3.8  # Match your Lambda runtime version","","      - name: Install AWS CLI and SAM CLI","        run: |","          sudo apt-get update","          sudo apt-get install -y awscli unzip","          curl -sSL https://github.com/aws/aws-sam-cli/releases/latest/download/aws-sam-cli-linux-x86_64.zip -o sam-cli.zip","          unzip sam-cli.zip -d sam-installation","          sudo ./sam-installation/install","","      - name: Configure AWS Credentials","        uses: aws-actions/configure-aws-credentials@v3","        with:","          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","          aws-region: ${{ secrets.AWS_REGION }}","","      - name: Build SAM Application","        run: sam build","","      - name: Deploy SAM Application","        run: |","          sam deploy \\","            --template-file .aws-sam/build/template.yaml \\","            --stack-name my-sam-stack \\","            --capabilities CAPABILITY_IAM \\","            --region ${{ secrets.AWS_REGION }}",""]}],[{"start":{"row":5,"column":14},"end":{"row":5,"column":52},"action":"remove","lines":["# Trigger on pushes to the main branch"],"id":14},{"start":{"row":5,"column":13},"end":{"row":5,"column":14},"action":"remove","lines":[" "]},{"start":{"row":5,"column":12},"end":{"row":5,"column":13},"action":"remove","lines":[" "]}],[{"start":{"row":19,"column":29},"end":{"row":19,"column":66},"action":"remove","lines":["  # Match your Lambda runtime version"],"id":15}],[{"start":{"row":33,"column":55},"end":{"row":33,"column":66},"action":"remove","lines":["_ACCESS_KEY"],"id":16},{"start":{"row":33,"column":55},"end":{"row":33,"column":56},"action":"insert","lines":["_"]},{"start":{"row":33,"column":56},"end":{"row":33,"column":57},"action":"insert","lines":["K"]},{"start":{"row":33,"column":57},"end":{"row":33,"column":58},"action":"insert","lines":["E"]},{"start":{"row":33,"column":58},"end":{"row":33,"column":59},"action":"insert","lines":["Y"]},{"start":{"row":33,"column":59},"end":{"row":33,"column":60},"action":"insert","lines":["_"]},{"start":{"row":33,"column":60},"end":{"row":33,"column":61},"action":"insert","lines":["I"]},{"start":{"row":33,"column":61},"end":{"row":33,"column":62},"action":"insert","lines":["D"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":24,"column":46},"end":{"row":24,"column":46},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1732014175975,"hash":"15d08975424cf35bfa9683eb286189c234546e75"}